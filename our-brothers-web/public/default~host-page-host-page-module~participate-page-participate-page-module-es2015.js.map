{"version":3,"sources":["./src/app/shared/components/profile-form/profile-form.component.ts","./src/app/shared/components/profile-form/profile-form.component.html","./src/app/shared/components/profile-form/profile-form.module.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+E;AACX;;;;;;;ICoDlE,wEACE;IAAA,wNACF;IAAA,4DAAI;;AD3CC,MAAM,oBAAoB;IAa/B,YAAoB,EAAe,EAAU,YAA0B;QAAnD,OAAE,GAAF,EAAE,CAAa;QAAU,iBAAY,GAAZ,YAAY,CAAc;QALhE,WAAM,GAAG,IAAI,0DAAY,EAAe,CAAC;QAGzC,gBAAW,GAAG,KAAK,CAAC;IAE+C,CAAC;IAE3E,QAAQ;QACN,MAAM,OAAO,GAAgB,IAAI,CAAC,IAAI,CAAC,OAAO,IAAK,EAAkB,CAAC;QAEtE,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC;YACxB,KAAK,EAAE,CAAC,OAAO,CAAC,KAAK,IAAI,IAAI,CAAC,YAAY,CAAC,KAAK,EAAE,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,KAAK,CAAC,CAAC;YAC1F,SAAS,EAAE;gBACT,OAAO,CAAC,SAAS;gBACjB,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,yDAAU,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;aACnG;YACD,QAAQ,EAAE;gBACR,OAAO,CAAC,QAAQ;gBAChB,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,SAAS,CAAC,EAAE,CAAC,EAAE,yDAAU,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,CAAC;aACnG;YACD,WAAW,EAAE,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC,yDAAU,CAAC,QAAQ,EAAE,yDAAU,CAAC,OAAO,CAAC,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,CAAC;YAC7G,KAAK,EAAE,CAAC,KAAK,EAAE,yDAAU,CAAC,YAAY,CAAC;SACxC,CAAC,CAAC;QAEH,IAAI,CAAC,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,GAAG,EAAE;YACpC,IAAI,CAAC,WAAW,GAAG,KAAK,CAAC;QAC3B,CAAC,CAAC,CAAC;IACL,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IAChC,CAAC;IAED,IAAI,SAAS;QACX,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IACpC,CAAC;IAED,IAAI,QAAQ;QACV,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;IACnC,CAAC;IAED,IAAI,WAAW;QACb,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC;IACtC,CAAC;IAED,IAAI,KAAK;QACP,OAAO,IAAI,CAAC,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;IAChC,CAAC;IAEM,QAAQ;QACb,IAAI,IAAI,CAAC,IAAI,CAAC,KAAK,EAAE;YACnB,MAAM,UAAU,GAAgB;gBAC9B,KAAK,EAAE,IAAI,CAAC,KAAK,CAAC,KAAK;gBACvB,SAAS,EAAE,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,EAAE;gBACtC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,IAAI,EAAE;gBACpC,WAAW,EAAE,IAAI,CAAC,WAAW,CAAC,KAAK;gBACnC,qGAAqG;aACtG,CAAC;YAEF,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;SAC9B;aAAM;YACL,IAAI,CAAC,WAAW,GAAG,IAAI,CAAC;YACxB,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;SAC9B;IACH,CAAC;;wFAxEU,oBAAoB;oGAApB,oBAAoB;QCZjC,yEACE;QAAA,qHACF;QAAA,4DAAM;QACN,yEACE;QAAA,yEACE;QAAA,yEACE;QAAA,sEAOF;QAAA,4DAAM;QACN,yEACE;QAAA,sEAOF;QAAA,4DAAM;QACR,4DAAM;QACN,yEACE;QAAA,yEACE;QAAA,uEAOF;QAAA,4DAAM;QACN,0EACE;QAAA,uEAOF;QAAA,4DAAM;QACR,4DAAM;QACN,0EACE;QAAA,mFAKgB;QADd,2KAAkB,0BAAsB,IAAC;QAC1C,4DAAe;QAChB,yEAAoG;QAAA,+HAAY;QAAA,4DAAI;QACtH,4DAAM;QACN,+GACE;QAKF,8EACE;QADM,6IAAS,cAAU,IAAC;QAC1B,uIACF;QAAA,4DAAS;QACX,4DAAM;;QA3DY,0DAAkB;QAAlB,+EAAkB;QAQ5B,0DAAuD;QAAvD,mHAAuD;QASvD,0DAAqD;QAArD,iHAAqD;QAWrD,0DAA+C;QAA/C,2GAA+C;QAS/C,0DAA2D;QAA3D,uHAA2D;QAM7D,0DAAqB;QAArB,sHAAqB;QAOO,0DAAmB;QAAnB,iFAAmB;;6FDzCxC,oBAAoB;cALhC,uDAAS;eAAC;gBACT,QAAQ,EAAE,kBAAkB;gBAC5B,WAAW,EAAE,+BAA+B;gBAC5C,SAAS,EAAE,CAAC,+BAA+B,CAAC;aAC7C;;kBAEE,mDAAK;;kBAGL,mDAAK;;kBAGL,oDAAM;;;;;;;;;;;;;;AEnBT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+C;AACN;AACuB;AACX;AACQ;;AAOtD,MAAM,iBAAiB;;gGAAjB,iBAAiB;4JAAjB,iBAAiB,kBAFnB,CAAC,kEAAmB,EAAE,wEAAc,EAAE,4DAAY,CAAC;mIAEjD,iBAAiB,mBAJb,4EAAoB,aAEzB,kEAAmB,EAAE,wEAAc,EAAE,4DAAY,aADjD,4EAAoB;6FAGnB,iBAAiB;cAL7B,sDAAQ;eAAC;gBACR,YAAY,EAAE,CAAC,4EAAoB,CAAC;gBACpC,OAAO,EAAE,CAAC,4EAAoB,CAAC;gBAC/B,OAAO,EAAE,CAAC,kEAAmB,EAAE,wEAAc,EAAE,4DAAY,CAAC;aAC7D","file":"default~host-page-host-page-module~participate-page-participate-page-module-es2015.js","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { User as FirebaseUser } from 'firebase';\r\nimport { User, UserProfile } from 'models';\r\nimport { UtilsService } from '../../services/utils.service';\r\nimport { ProfileForm } from './profile-form.types';\r\n\r\n@Component({\r\n  selector: 'app-profile-form',\r\n  templateUrl: './profile-form.component.html',\r\n  styleUrls: ['./profile-form.component.scss']\r\n})\r\nexport class ProfileFormComponent implements OnInit {\r\n  @Input()\r\n  public user: User;\r\n\r\n  @Input()\r\n  public firebaseUser: FirebaseUser;\r\n\r\n  @Output()\r\n  public submit = new EventEmitter<ProfileForm>();\r\n\r\n  public form: FormGroup;\r\n  public formInvalid = false;\r\n\r\n  constructor(private fb: FormBuilder, private utilsService: UtilsService) {}\r\n\r\n  ngOnInit() {\r\n    const profile: UserProfile = this.user.profile || ({} as UserProfile);\r\n\r\n    this.form = this.fb.group({\r\n      email: [profile.email || this.firebaseUser.email, [Validators.required, Validators.email]],\r\n      firstName: [\r\n        profile.firstName,\r\n        [Validators.required, Validators.maxLength(20), Validators.pattern(this.utilsService.namePattern)]\r\n      ],\r\n      lastName: [\r\n        profile.lastName,\r\n        [Validators.required, Validators.maxLength(20), Validators.pattern(this.utilsService.namePattern)]\r\n      ],\r\n      phoneNumber: [profile.phoneNumber, [Validators.required, Validators.pattern(this.utilsService.phonePattern)]],\r\n      agree: [false, Validators.requiredTrue]\r\n    });\r\n\r\n    this.form.valueChanges.subscribe(() => {\r\n      this.formInvalid = false;\r\n    });\r\n  }\r\n\r\n  get email() {\r\n    return this.form.get('email');\r\n  }\r\n\r\n  get firstName() {\r\n    return this.form.get('firstName');\r\n  }\r\n\r\n  get lastName() {\r\n    return this.form.get('lastName');\r\n  }\r\n\r\n  get phoneNumber() {\r\n    return this.form.get('phoneNumber');\r\n  }\r\n\r\n  get agree() {\r\n    return this.form.get('agree');\r\n  }\r\n\r\n  public onSubmit() {\r\n    if (this.form.valid) {\r\n      const parsedForm: ProfileForm = {\r\n        email: this.email.value,\r\n        firstName: this.firstName.value.trim(),\r\n        lastName: this.lastName.value.trim(),\r\n        phoneNumber: this.phoneNumber.value\r\n        //phoneNumber: this.utilsService.toInternationalPhoneNumber(this.phoneNumber.value.replace(/-/g, ''))\r\n      };\r\n\r\n      this.submit.emit(parsedForm);\r\n    } else {\r\n      this.formInvalid = true;\r\n      this.form.markAllAsTouched();\r\n    }\r\n  }\r\n}\r\n","<div class=\"medium-heading\">\r\n  פרטי משתמש\r\n</div>\r\n<div class=\"form\" [formGroup]=\"form\">\r\n  <div class=\"form-row\">\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"שם פרטי\"\r\n        class=\"form-field\"\r\n        formControlName=\"firstName\"\r\n        [class.invalid]=\"!firstName.valid && firstName.touched\"\r\n      />\r\n    </div>\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"שם משפחה\"\r\n        class=\"form-field\"\r\n        formControlName=\"lastName\"\r\n        [class.invalid]=\"!lastName.valid && lastName.touched\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <div class=\"form-row\">\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"אימייל\"\r\n        class=\"form-field\"\r\n        formControlName=\"email\"\r\n        [class.invalid]=\"!email.valid && email.touched\"\r\n      />\r\n    </div>\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"tel\"\r\n        placeholder=\"טלפון נייד\"\r\n        class=\"form-field\"\r\n        formControlName=\"phoneNumber\"\r\n        [class.invalid]=\"!phoneNumber.valid && phoneNumber.touched\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <div class=\"agree-input\">\r\n    <app-checkbox\r\n      [label]=\"'אני מסכים'\"\r\n      [checked]=\"agree.value\"\r\n      [invalid]=\"!agree.valid && agree.touched\"\r\n      (checkedChanged)=\"agree.setValue($event)\"\r\n    ></app-checkbox>\r\n    <a class=\"site-link decoration\" href=\"/assets/docs/תנאי%20שימוש%20האחים%20שלנו.pdf\" target=\"_blank\">לתנאי השימוש</a>\r\n  </div>\r\n  <p class=\"form-invalid-message\" *ngIf=\"formInvalid\">\r\n    אחד או יותר מהשדות אינם תקינים\r\n  </p>\r\n  <!-- <p class=\"\" *ngIf=\"!formInvalid\">\r\n    הפרטים נשמרו במערכת\r\n  </p> -->\r\n  <button (click)=\"onSubmit()\" class=\"site-button primary-button\">\r\n    לאישור הפרטים\r\n  </button>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ProfileFormComponent } from './profile-form.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { CheckboxModule } from '../checkbox/checkbox.module';\r\n\r\n@NgModule({\r\n  declarations: [ProfileFormComponent],\r\n  exports: [ProfileFormComponent],\r\n  imports: [ReactiveFormsModule, CheckboxModule, CommonModule]\r\n})\r\nexport class ProfileFormModule {}\r\n"],"sourceRoot":"webpack:///"}