{"version":3,"sources":["webpack:///src/app/shared/components/profile-form/profile-form.component.ts","webpack:///src/app/shared/components/profile-form/profile-form.component.html","webpack:///src/app/shared/components/profile-form/profile-form.module.ts"],"names":["ProfileFormComponent","fb","utilsService","submit","formInvalid","profile","user","form","group","email","firebaseUser","required","firstName","maxLength","pattern","namePattern","lastName","phoneNumber","phonePattern","agree","requiredTrue","valueChanges","subscribe","valid","parsedForm","value","trim","emit","markAllAsTouched","get","onSubmit","selector","templateUrl","styleUrls","ProfileFormModule","declarations","exports","imports"],"mappings":"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","file":"default~host-page-host-page-module~participate-page-participate-page-module-es5.js","sourcesContent":["import { Component, EventEmitter, Input, OnInit, Output } from '@angular/core';\r\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\r\nimport { User as FirebaseUser } from 'firebase';\r\nimport { User, UserProfile } from 'models';\r\nimport { UtilsService } from '../../services/utils.service';\r\nimport { ProfileForm } from './profile-form.types';\r\n\r\n@Component({\r\n  selector: 'app-profile-form',\r\n  templateUrl: './profile-form.component.html',\r\n  styleUrls: ['./profile-form.component.scss']\r\n})\r\nexport class ProfileFormComponent implements OnInit {\r\n  @Input()\r\n  public user: User;\r\n\r\n  @Input()\r\n  public firebaseUser: FirebaseUser;\r\n\r\n  @Output()\r\n  public submit = new EventEmitter<ProfileForm>();\r\n\r\n  public form: FormGroup;\r\n  public formInvalid = false;\r\n\r\n  constructor(private fb: FormBuilder, private utilsService: UtilsService) {}\r\n\r\n  ngOnInit() {\r\n    const profile: UserProfile = this.user.profile || ({} as UserProfile);\r\n\r\n    this.form = this.fb.group({\r\n      email: [profile.email || this.firebaseUser.email, [Validators.required, Validators.email]],\r\n      firstName: [\r\n        profile.firstName,\r\n        [Validators.required, Validators.maxLength(20), Validators.pattern(this.utilsService.namePattern)]\r\n      ],\r\n      lastName: [\r\n        profile.lastName,\r\n        [Validators.required, Validators.maxLength(20), Validators.pattern(this.utilsService.namePattern)]\r\n      ],\r\n      phoneNumber: [profile.phoneNumber, [Validators.required, Validators.pattern(this.utilsService.phonePattern)]],\r\n      agree: [false, Validators.requiredTrue]\r\n    });\r\n\r\n    this.form.valueChanges.subscribe(() => {\r\n      this.formInvalid = false;\r\n    });\r\n  }\r\n\r\n  get email() {\r\n    return this.form.get('email');\r\n  }\r\n\r\n  get firstName() {\r\n    return this.form.get('firstName');\r\n  }\r\n\r\n  get lastName() {\r\n    return this.form.get('lastName');\r\n  }\r\n\r\n  get phoneNumber() {\r\n    return this.form.get('phoneNumber');\r\n  }\r\n\r\n  get agree() {\r\n    return this.form.get('agree');\r\n  }\r\n\r\n  public onSubmit() {\r\n    if (this.form.valid) {\r\n      const parsedForm: ProfileForm = {\r\n        email: this.email.value,\r\n        firstName: this.firstName.value.trim(),\r\n        lastName: this.lastName.value.trim(),\r\n        phoneNumber: this.phoneNumber.value\r\n        //phoneNumber: this.utilsService.toInternationalPhoneNumber(this.phoneNumber.value.replace(/-/g, ''))\r\n      };\r\n\r\n      this.submit.emit(parsedForm);\r\n    } else {\r\n      this.formInvalid = true;\r\n      this.form.markAllAsTouched();\r\n    }\r\n  }\r\n}\r\n","<div class=\"medium-heading\">\r\n  פרטי משתמש\r\n</div>\r\n<div class=\"form\" [formGroup]=\"form\">\r\n  <div class=\"form-row\">\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"שם פרטי\"\r\n        class=\"form-field\"\r\n        formControlName=\"firstName\"\r\n        [class.invalid]=\"!firstName.valid && firstName.touched\"\r\n      />\r\n    </div>\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"text\"\r\n        placeholder=\"שם משפחה\"\r\n        class=\"form-field\"\r\n        formControlName=\"lastName\"\r\n        [class.invalid]=\"!lastName.valid && lastName.touched\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <div class=\"form-row\">\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"email\"\r\n        placeholder=\"אימייל\"\r\n        class=\"form-field\"\r\n        formControlName=\"email\"\r\n        [class.invalid]=\"!email.valid && email.touched\"\r\n      />\r\n    </div>\r\n    <div class=\"col\">\r\n      <input\r\n        type=\"tel\"\r\n        placeholder=\"טלפון נייד\"\r\n        class=\"form-field\"\r\n        formControlName=\"phoneNumber\"\r\n        [class.invalid]=\"!phoneNumber.valid && phoneNumber.touched\"\r\n      />\r\n    </div>\r\n  </div>\r\n  <div class=\"agree-input\">\r\n    <app-checkbox\r\n      [label]=\"'אני מסכים'\"\r\n      [checked]=\"agree.value\"\r\n      [invalid]=\"!agree.valid && agree.touched\"\r\n      (checkedChanged)=\"agree.setValue($event)\"\r\n    ></app-checkbox>\r\n    <a class=\"site-link decoration\" href=\"/assets/docs/תנאי%20שימוש%20האחים%20שלנו.pdf\" target=\"_blank\">לתנאי השימוש</a>\r\n  </div>\r\n  <p class=\"form-invalid-message\" *ngIf=\"formInvalid\">\r\n    אחד או יותר מהשדות אינם תקינים\r\n  </p>\r\n  <!-- <p class=\"\" *ngIf=\"!formInvalid\">\r\n    הפרטים נשמרו במערכת\r\n  </p> -->\r\n  <button (click)=\"onSubmit()\" class=\"site-button primary-button\">\r\n    לאישור הפרטים\r\n  </button>\r\n</div>\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { ProfileFormComponent } from './profile-form.component';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\nimport { CheckboxModule } from '../checkbox/checkbox.module';\r\n\r\n@NgModule({\r\n  declarations: [ProfileFormComponent],\r\n  exports: [ProfileFormComponent],\r\n  imports: [ReactiveFormsModule, CheckboxModule, CommonModule]\r\n})\r\nexport class ProfileFormModule {}\r\n"]}