{"version":3,"sources":["./src/app/admin/users/admin-users.module.ts","./src/app/admin/users/page/admin-users-page.component.ts","./src/app/admin/users/page/admin-users-page.component.html","./src/app/admin/users/page/admin-users-page.module.ts","./src/app/admin/users/sort-users/sort-users.pipe.ts","./src/app/admin/users/users-list-row/users-list-row.component.ts","./src/app/admin/users/users-list-row/users-list-row.component.html","./src/app/admin/users/users-list/users-list.component.ts","./src/app/admin/users/users-list/users-list.component.html"],"names":[],"mappings":"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","file":"admin-users-page-admin-users-page-module-es2015.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { SelectModule } from '../../shared/components/select/select.module';\r\nimport { UsersListComponent } from './users-list/users-list.component';\r\nimport { UsersListRowComponent } from './users-list-row/users-list-row.component';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PipesModule } from '../../shared/pipes/pipes.module';\r\nimport { ListModule } from '../../shared/components/list/list.module';\r\nimport { FreeTextFilterModule } from '../../shared/components/free-text-filter/free-text-filter.module';\r\nimport { SortUsersPipe } from './sort-users/sort-users.pipe';\r\n\r\nconst api = [UsersListRowComponent, UsersListComponent];\r\n\r\n@NgModule({\r\n  imports: [SelectModule, CommonModule, PipesModule, ListModule, FreeTextFilterModule],\r\n  declarations: [api, SortUsersPipe],\r\n  exports: api\r\n})\r\nexport class AdminUsersModule {}\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subject, Subscription } from 'rxjs';\r\nimport { ToastrService } from 'ngx-toastr';\r\n\r\nimport { User, Meeting } from 'models';\r\nimport { UtilsService } from '../../../shared/services/utils.service';\r\nimport { DataService, VolunteeringUser } from '../../../shared/services/data.service';\r\nimport { AuthService } from '../../../shared/services/auth.service';\r\nimport { HttpService } from '../../../shared/services/http.service';\r\n\r\n@Component({\r\n  selector: 'app-admin-users-page',\r\n  templateUrl: './admin-users-page.component.html',\r\n  styleUrls: ['./admin-users-page.component.scss']\r\n})\r\nexport class AdminUsersPageComponent implements OnInit, OnDestroy {\r\n  currentUser: User;\r\n  users: User[];\r\n  filter: string = '';\r\n  filteredUsersIds: Set<string>;\r\n  error = '';\r\n  loading = true;\r\n\r\n  selectedMeeting$ = new Subject<Meeting>();\r\n  selectingUser: User;\r\n\r\n  private subscriptions: Subscription[] = [];\r\n\r\n  constructor(\r\n    private toastr: ToastrService,\r\n    private authService: AuthService,\r\n    private dataService: DataService,\r\n    private httpService: HttpService,\r\n    private utilsService: UtilsService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    console.log('hoiiiiii');\r\n    this.subscriptions.push(\r\n      this.authService.user.subscribe(currentUser => (this.currentUser = currentUser)),\r\n      this.dataService.getUsers().subscribe(\r\n        users => {\r\n          this.loading = false;\r\n          this.users = users;\r\n          this.filterUsers();\r\n        },\r\n        error => {\r\n          this.loading = false;\r\n          this.error = error.toString();\r\n        }\r\n      )\r\n    );\r\n  }\r\n\r\n  filterUsers() {\r\n    const filteredUsersIds = this.utilsService.filteringUsers(this.users, this.filter).map(({ id }) => id);\r\n    this.filteredUsersIds = new Set(filteredUsersIds);\r\n  }\r\n\r\n  volunteering({ user, isVolunteer }: VolunteeringUser) {\r\n    if (user) {\r\n      if (\r\n        window.confirm(\r\n          'האם ברוצנך ' +\r\n            (isVolunteer ? 'להגדיר' : 'להסיר') +\r\n            ' את ' +\r\n            user.profile.firstName +\r\n            ' ' +\r\n            user.profile.lastName +\r\n            ' כמתנדב/ת?'\r\n        )\r\n      ) {\r\n        this.dataService.setUserVolunteer(user, isVolunteer).subscribe(\r\n          () => {\r\n            this.toastr.success('המשתמש הוגדר כמתנדב בהצלחה.');\r\n          },\r\n          () => {\r\n            this.toastr.error('שגיאה - לא ניתן להגדיר משתמש כמתנדב. נא ליצור קשר.');\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  deleting(user: User) {\r\n    if (user) {\r\n      if (window.confirm('האם ברצונך למחוק את ' + user.profile.firstName + ' ' + user.profile.lastName + '?')) {\r\n        this.httpService.deleteUser(user).subscribe(\r\n          () => {\r\n            this.toastr.success('המשתמש נמחק בהצלחה.');\r\n          },\r\n          () => {\r\n            this.toastr.error('שגיאה - לא ניתן למחוק משתמש. נא ליצור קשר.');\r\n          }\r\n        );\r\n      }\r\n    }\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    this.subscriptions.forEach(subscription => {\r\n      subscription.unsubscribe();\r\n    });\r\n  }\r\n}\r\n","<div class=\"container users-container\">\r\n  <div class=\"medium-heading\">ניהול משתמשים</div>\r\n  <app-free-text-filter class=\"free-text-filter\" [(filter)]=\"filter\" (filterChange)=\"filterUsers()\">\r\n  </app-free-text-filter>\r\n  <div class=\"users-list-container\">\r\n    <div *ngIf=\"loading\" class=\"loading\">\r\n      טוען..\r\n    </div>\r\n    <div *ngIf=\"!loading\">\r\n      <div class=\"error-message\" *ngIf=\"error; else userList\">\r\n        {{ error }}\r\n      </div>\r\n      <ng-template #userList>\r\n        <app-users-list\r\n          [filteredUsers]=\"filteredUsersIds\"\r\n          [currentUser]=\"currentUser\"\r\n          [users]=\"users\"\r\n          (deleting)=\"deleting($event)\"\r\n          (volunteering)=\"volunteering($event)\"\r\n        ></app-users-list>\r\n      </ng-template>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { AdminUsersModule } from '../admin-users.module';\r\nimport { AdminUsersPageComponent } from './admin-users-page.component';\r\nimport { FreeTextFilterModule } from '../../../shared/components/free-text-filter/free-text-filter.module';\r\nimport { CommonModule } from '@angular/common';\r\nimport { RouterModule } from '@angular/router';\r\n\r\nconst routes = [\r\n  {\r\n    path: '',\r\n    component: AdminUsersPageComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [AdminUsersPageComponent],\r\n  imports: [AdminUsersModule, FreeTextFilterModule, CommonModule, RouterModule.forChild(routes)]\r\n})\r\nexport class AdminUsersPageModule {}\r\n","import { Pipe, PipeTransform } from '@angular/core';\r\nimport { User } from 'models';\r\nimport { SortedColumn } from '../../../shared/components/list/list-header/list-header.types';\r\n\r\nconst getFirstName = (user: User) => (user.profile ? user.profile.firstName : '');\r\nconst getLastName = (user: User) => (user.profile ? user.profile.lastName : '');\r\nconst getEmail = (user: User) => (user.profile ? user.profile.email : '');\r\nconst getPhoneNumber = (user: User) => (user.profile ? user.profile.phoneNumber : '');\r\n\r\nconst valueGetter = {\r\n  firstName: getFirstName,\r\n  lastName: getLastName,\r\n  email: getEmail,\r\n  phoneNumber: getPhoneNumber\r\n};\r\nconst getValue = (user: User, column) => (column in valueGetter ? valueGetter[column](user) : user[column] || '');\r\n\r\n@Pipe({\r\n  name: 'sortUsers'\r\n})\r\nexport class SortUsersPipe implements PipeTransform {\r\n  transform(users: User[], { column, direction }: SortedColumn): User[] {\r\n    if (!column) {\r\n      return users;\r\n    }\r\n    return users.slice().sort((a, b) => {\r\n      let aValue = getValue(a, column);\r\n      let bValue = getValue(b, column);\r\n\r\n      if (direction === 'desc') {\r\n        [aValue, bValue] = [bValue, aValue];\r\n      }\r\n\r\n      if (typeof aValue === 'number' && typeof bValue === 'number') {\r\n        return aValue - bValue;\r\n      }\r\n\r\n      return aValue.toString().localeCompare(bValue);\r\n    });\r\n  }\r\n}\r\n","import { Component, Input, ChangeDetectionStrategy, EventEmitter, Output } from '@angular/core';\r\nimport { User } from 'models';\r\n\r\n@Component({\r\n  selector: 'app-users-list-row',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './users-list-row.component.html',\r\n  styleUrls: ['./users-list-row.component.scss']\r\n})\r\nexport class UsersListRowComponent {\r\n  @Input() currentUser: User;\r\n  @Input() user: User;\r\n\r\n  @Output() deleting = new EventEmitter<void>();\r\n  @Output() volunteering = new EventEmitter<boolean>();\r\n\r\n  expanded = false;\r\n}\r\n","<div class=\"row-container\">\r\n  <div class=\"row\">\r\n    <div class=\"col col-row-state\">\r\n      <button class=\"volunteering-button\" *ngIf=\"currentUser?.isAdmin\" (click)=\"volunteering.emit(!user.isVolunteer)\">\r\n        <div class=\"key-icon\" [ngClass]=\"{ disabled: !user.isVolunteer }\"></div>\r\n      </button>\r\n      <button class=\"trash-button\" *ngIf=\"currentUser?.isAdmin\" (click)=\"deleting.emit()\">\r\n        <div class=\"trash-icon\"></div>\r\n      </button>\r\n      <button class=\"expand-button\" *ngIf=\"!expanded\" (click)=\"expanded = true\">\r\n        <div class=\"expand-icon\"></div>\r\n      </button>\r\n      <button class=\"collapse-button\" *ngIf=\"expanded\" (click)=\"expanded = false\">\r\n        <div class=\"collapse-icon\"></div>\r\n      </button>\r\n    </div>\r\n    <div class=\"col col-name\">\r\n      {{ user.profile?.firstName }}\r\n    </div>\r\n    <div class=\"col col-name\">\r\n      {{ user.profile?.lastName }}\r\n    </div>\r\n    <div class=\"col col-communications\">\r\n      <div class=\"user-email\" *ngIf=\"user.profile?.email\">\r\n        <div class=\"email-address\">\r\n          {{ user.profile?.email }}\r\n        </div>\r\n        <div class=\"email-icon\"></div>\r\n      </div>\r\n    </div>\r\n    <div class=\"col col-communications\">\r\n      <div class=\"user-phone\" *ngIf=\"user.profile?.phoneNumber\">\r\n        <div class=\"phone-number\">\r\n          {{ user.profile.phoneNumber | phone }}\r\n        </div>\r\n        <div class=\"phone-icon\"></div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class=\"expanded-row\" *ngIf=\"expanded\">\r\n    <div class=\"expanded-col col-info\">\r\n      <div class=\"title\">\r\n        מספר סידורי:\r\n      </div>\r\n      <div>\r\n        {{ user.id }}\r\n      </div>\r\n      <div class=\"title\">\r\n        גיל:\r\n      </div>\r\n      <div>\r\n        {{ user.profile?.birthDay ? (user.profile.birthDay | seniority) : 'אין' }}\r\n      </div>\r\n    </div>\r\n    <div class=\"expanded-col col-dates\">\r\n      <div>\r\n        <div class=\"title\">כניסה:</div>\r\n        <div>{{ user.lastSignInDate | date: 'dd.MM.yyyy' }}</div>\r\n      </div>\r\n      <div>\r\n        <div class=\"title\">הרשמה:</div>\r\n        <div>{{ user.registered | date: 'dd.MM.yyyy' }}</div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { ChangeDetectionStrategy, Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\nimport { User } from 'models';\r\nimport { SortedColumn } from '../../../shared/components/list/list-header/list-header.types';\r\nimport { VolunteeringUser } from '../../../shared/services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-users-list',\r\n  templateUrl: './users-list.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./users-list.component.scss']\r\n})\r\nexport class UsersListComponent {\r\n  @Input() currentUser: User;\r\n  @Input() users: User[];\r\n  @Input() filteredUsers: Set<string>;\r\n\r\n  @Output() volunteering = new EventEmitter<VolunteeringUser>();\r\n  @Output() deleting = new EventEmitter<User>();\r\n\r\n  sortedColumn: SortedColumn = {\r\n    column: 'name',\r\n    direction: 'asc'\r\n  };\r\n}\r\n","<app-list-header [scroll]=\"filteredUsers.size > 10\" [(sort)]=\"sortedColumn\" class=\"list-header\">\r\n  <app-list-column class=\"col-row-state\"></app-list-column>\r\n  <app-list-column title=\"שם פרטי\" field=\"firstName\"></app-list-column>\r\n  <app-list-column title=\"שם משפחה\" field=\"lastName\"></app-list-column>\r\n  <app-list-column title=\"מייל\" field=\"email\"></app-list-column>\r\n  <app-list-column title=\"טלפון נייד\" field=\"phoneNumber\"></app-list-column>\r\n</app-list-header>\r\n<div class=\"users-items\">\r\n  <div *ngFor=\"let user of users | sortUsers: sortedColumn\">\r\n    <app-users-list-row\r\n      [class.hidden]=\"!filteredUsers.has(user.id)\"\r\n      [currentUser]=\"currentUser\"\r\n      [user]=\"user\"\r\n      (deleting)=\"deleting.emit(user)\"\r\n      (volunteering)=\"volunteering.emit({ user: user, isVolunteer: $event })\"\r\n    ></app-users-list-row>\r\n  </div>\r\n</div>\r\n"],"sourceRoot":"webpack:///"}