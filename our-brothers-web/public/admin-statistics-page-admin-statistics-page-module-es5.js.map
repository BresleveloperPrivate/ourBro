{"version":3,"sources":["webpack:///src/app/admin/statistics/active-users-statistics/active-users-statistics.component.ts","webpack:///src/app/admin/statistics/active-users-statistics/active-users-statistics.component.html","webpack:///src/app/admin/statistics/admin-statistics.module.ts","webpack:///src/app/admin/statistics/bereaveds-statistics/bereaveds-statistics.component.ts","webpack:///src/app/admin/statistics/bereaveds-statistics/bereaveds-statistics.component.html","webpack:///src/app/admin/statistics/meetings-statistics/meetings-statistics.component.ts","webpack:///src/app/admin/statistics/meetings-statistics/meetings-statistics.component.html","webpack:///src/app/admin/statistics/page/admin-statistics-page.component.ts","webpack:///src/app/admin/statistics/page/admin-statistics-page.component.html","webpack:///src/app/admin/statistics/page/admin-statistics-page.module.ts","webpack:///src/app/admin/statistics/registrations-statistics/registrations-statistics.component.ts","webpack:///src/app/admin/statistics/registrations-statistics/registrations-statistics.component.html"],"names":["ActiveUsersStatisticsComponent","total","users","activeUsers","bereaved","old","host","participate","current","Date","getTime","user","lastSignInDate","registered","role","calcActiveUsers","selector","templateUrl","changeDetection","OnPush","styleUrls","api","AdminStatisticsModule","imports","declarations","exports","BereavedsStatisticsComponent","bereaveds","bereavedsStatistics","count","bereavedParticipation","meetings","length","calcBereavedsStatistics","MeetingsStatisticsComponent","yearlyMeetingsStatisticsMap","meeting","year","date","getFullYear","Object","keys","map","Number","parseInt","meetingStatistics","sort","a","b","yearlyMeetingsStatistics","calcYearlyMeetingsStatistics","AdminStatisticsPageComponent","dataService","loadingUsers","loadingBereaveds","loadingMeetings","getUsers","pipe","subscribe","error","toString","getBereaveds","getAllMeetings","routes","path","component","AdminStatisticsPageModule","forChild","RegistrationsStatisticsComponent","yearlyRegisteredUsersMap","isNaN","registeredUsers","yearlyRegisteredUsers","calcYearlyRegisteredUsers"],"mappings":"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","file":"admin-statistics-page-admin-statistics-page-module-es5.js","sourcesContent":["import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\n\r\nimport { User, UserRole } from 'models';\r\nimport { MEMORIAL_YEAR } from 'src/app/shared/constants';\r\n\r\ntype ActiveUsers = {\r\n  [role in UserRole]: {\r\n    new: number;\r\n    old: number;\r\n  };\r\n};\r\n\r\n@Component({\r\n  selector: 'app-active-users-statistics',\r\n  templateUrl: './active-users-statistics.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./active-users-statistics.component.scss']\r\n})\r\nexport class ActiveUsersStatisticsComponent {\r\n  activeUsers: ActiveUsers;\r\n  total: number = 0;\r\n\r\n  @Input()\r\n  set users(users: User[]) {\r\n    this.activeUsers = this.calcActiveUsers(users);\r\n  }\r\n\r\n  calcActiveUsers(users: User[]): ActiveUsers {\r\n    const activeUsers: ActiveUsers = {\r\n      [UserRole.bereaved]: {\r\n        new: 0,\r\n        old: 0\r\n      },\r\n      [UserRole.host]: {\r\n        new: 0,\r\n        old: 0\r\n      },\r\n      [UserRole.participate]: {\r\n        new: 0,\r\n        old: 0\r\n      }\r\n    };\r\n\r\n    const current = new Date(MEMORIAL_YEAR, 1, 1).getTime();\r\n\r\n    for (const user of users) {\r\n      if (user.lastSignInDate >= current) {\r\n        this.total++;\r\n        if (user.registered >= current) {\r\n          activeUsers[user.role].new++;\r\n        } else {\r\n          activeUsers[user.role].old++;\r\n        }\r\n      }\r\n    }\r\n\r\n    return activeUsers;\r\n  }\r\n}\r\n","<div class=\"small-heading\">פעילים</div>\r\n<table class=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th colspan=\"2\">אחים</th>\r\n      <th colspan=\"2\">מארחים</th>\r\n      <th colspan=\"2\">משתמשים</th>\r\n    </tr>\r\n    <tr>\r\n      <th>חדשים</th>\r\n      <th>חוזרים</th>\r\n      <th>חדשים</th>\r\n      <th>חוזרים</th>\r\n      <th>חדשים</th>\r\n      <th>חוזרים</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr>\r\n      <td>{{ activeUsers.bereaved.new }}</td>\r\n      <td>{{ activeUsers.bereaved.old }}</td>\r\n      <td>{{ activeUsers.host.new }}</td>\r\n      <td>{{ activeUsers.host.old }}</td>\r\n      <td>{{ activeUsers.participate.new }}</td>\r\n      <td>{{ activeUsers.participate.old }}</td>\r\n    </tr>\r\n  </tbody>\r\n  <tfoot>\r\n    <tr>\r\n      <td>סה\"כ</td>\r\n      <td>{{ total }}</td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { ActiveUsersStatisticsComponent } from './active-users-statistics/active-users-statistics.component';\r\nimport { BereavedsStatisticsComponent } from './bereaveds-statistics/bereaveds-statistics.component';\r\nimport { MeetingsStatisticsComponent } from './meetings-statistics/meetings-statistics.component';\r\nimport { RegistrationsStatisticsComponent } from './registrations-statistics/registrations-statistics.component';\r\n\r\nconst api = [\r\n  ActiveUsersStatisticsComponent,\r\n  BereavedsStatisticsComponent,\r\n  MeetingsStatisticsComponent,\r\n  RegistrationsStatisticsComponent\r\n];\r\n\r\n@NgModule({\r\n  imports: [CommonModule],\r\n  declarations: [api],\r\n  exports: api\r\n})\r\nexport class AdminStatisticsModule {}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\n\r\nimport { User } from 'models';\r\nimport { MEMORIAL_YEAR } from 'src/app/shared/constants';\r\n\r\ninterface BereavedStatistics {\r\n  count: number;\r\n  registered: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-bereaveds-statistics',\r\n  templateUrl: './bereaveds-statistics.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./bereaveds-statistics.component.scss']\r\n})\r\nexport class BereavedsStatisticsComponent {\r\n  bereavedsStatistics: BereavedStatistics;\r\n\r\n  @Input()\r\n  set bereaveds(bereaveds: User[]) {\r\n    this.bereavedsStatistics = this.calcBereavedsStatistics(bereaveds);\r\n  }\r\n\r\n  calcBereavedsStatistics(bereaveds: User[]): BereavedStatistics {\r\n    const bereavedsStatistics: BereavedStatistics = {\r\n      count: 0,\r\n      registered: 0\r\n    };\r\n\r\n    const current = new Date(MEMORIAL_YEAR, 1, 1).getTime();\r\n\r\n    for (const bereaved of bereaveds) {\r\n      if (bereaved.lastSignInDate >= current) {\r\n        bereavedsStatistics.count++;\r\n        if (bereaved.bereavedParticipation && bereaved.bereavedParticipation[MEMORIAL_YEAR]?.meetings?.length) {\r\n          bereavedsStatistics.registered++;\r\n        }\r\n      }\r\n    }\r\n\r\n    return bereavedsStatistics;\r\n  }\r\n}\r\n","<div class=\"small-heading\">אחים</div>\r\n<table class=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th>אחים</th>\r\n      <th>רשומים</th>\r\n      <th>אחוז</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <td>{{ bereavedsStatistics.count }}</td>\r\n    <td>{{ bereavedsStatistics.registered }}</td>\r\n    <td>{{ bereavedsStatistics.registered / bereavedsStatistics.count | percent }}</td>\r\n  </tbody>\r\n</table>\r\n","import { ChangeDetectionStrategy, Component, Input, Output, EventEmitter } from '@angular/core';\r\n\r\nimport { Meeting } from 'models';\r\n\r\ninterface MeetingStatistics {\r\n  count: number;\r\n  registered: number;\r\n}\r\n\r\ninterface YearlyMeetingsStatistics {\r\n  year: number;\r\n  meetingStatistics: MeetingStatistics;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-meetings-statistics',\r\n  templateUrl: './meetings-statistics.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./meetings-statistics.component.scss']\r\n})\r\nexport class MeetingsStatisticsComponent {\r\n  yearlyMeetingsStatistics: YearlyMeetingsStatistics[];\r\n  total: number = 0;\r\n\r\n  @Input()\r\n  set meetings(meetings: Meeting[]) {\r\n    this.yearlyMeetingsStatistics = this.calcYearlyMeetingsStatistics(meetings);\r\n  }\r\n\r\n  calcYearlyMeetingsStatistics(meetings: Meeting[]): YearlyMeetingsStatistics[] {\r\n    const yearlyMeetingsStatisticsMap: {\r\n      [year: number]: MeetingStatistics;\r\n    } = {};\r\n\r\n    for (const meeting of meetings) {\r\n      const year = new Date(meeting.date).getFullYear();\r\n\r\n      this.total++;\r\n\r\n      yearlyMeetingsStatisticsMap[year] = yearlyMeetingsStatisticsMap[year] || {\r\n        count: 0,\r\n        registered: 0\r\n      };\r\n\r\n      yearlyMeetingsStatisticsMap[year].count++;\r\n\r\n      if (meeting.bereaved) {\r\n        yearlyMeetingsStatisticsMap[year].registered++;\r\n      }\r\n    }\r\n\r\n    return Object.keys(yearlyMeetingsStatisticsMap)\r\n      .map(year => ({\r\n        year: Number.parseInt(year),\r\n        meetingStatistics: yearlyMeetingsStatisticsMap[year]\r\n      }))\r\n      .sort((a, b) => b.year - a.year);\r\n  }\r\n}\r\n","<div class=\"small-heading\">מפגשים</div>\r\n<table class=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th>שנה</th>\r\n      <th>מפגשים</th>\r\n      <th>רשומים</th>\r\n      <th>אחוז</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let year of yearlyMeetingsStatistics\">\r\n      <td>{{ year.year }}</td>\r\n      <td>{{ year.meetingStatistics.count }}</td>\r\n      <td>{{ year.meetingStatistics.registered }}</td>\r\n      <td>{{ year.meetingStatistics.registered / year.meetingStatistics.count | percent }}</td>\r\n    </tr>\r\n  </tbody>\r\n  <tfoot>\r\n    <tr>\r\n      <td>סה\"כ</td>\r\n      <td>{{ total }}</td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n","import { Component, OnInit, OnDestroy } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport { take } from 'rxjs/operators';\r\n\r\nimport { User, Meeting } from 'models';\r\nimport { DataService } from '../../../shared/services/data.service';\r\n\r\n@Component({\r\n  selector: 'app-admin-statistics-page',\r\n  templateUrl: './admin-statistics-page.component.html',\r\n  styleUrls: ['./admin-statistics-page.component.scss']\r\n})\r\nexport class AdminStatisticsPageComponent implements OnInit {\r\n  loadingUsers = true;\r\n  loadingBereaveds = true;\r\n  loadingMeetings = true;\r\n  users: User[];\r\n  bereaveds: User[];\r\n  meetings: Meeting[];\r\n  error: string;\r\n\r\n  constructor(private dataService: DataService) {}\r\n\r\n  ngOnInit(): void {\r\n    this.dataService\r\n      .getUsers()\r\n      .pipe(take(1))\r\n      .subscribe(\r\n        users => {\r\n          this.loadingUsers = false;\r\n          this.users = users;\r\n        },\r\n        error => {\r\n          this.loadingUsers = false;\r\n          this.error = error.toString();\r\n        }\r\n      );\r\n    this.dataService\r\n      .getBereaveds()\r\n      .pipe(take(1))\r\n      .subscribe(\r\n        bereaveds => {\r\n          this.loadingBereaveds = false;\r\n          this.bereaveds = bereaveds;\r\n        },\r\n        error => {\r\n          this.loadingBereaveds = false;\r\n          this.error = error.toString();\r\n        }\r\n      );\r\n    this.dataService\r\n      .getAllMeetings()\r\n      .pipe(take(1))\r\n      .subscribe(\r\n        meetings => {\r\n          this.loadingMeetings = false;\r\n          this.meetings = meetings;\r\n        },\r\n        error => {\r\n          this.loadingMeetings = false;\r\n          this.error = error.toString();\r\n        }\r\n      );\r\n  }\r\n}\r\n","<div class=\"container\">\r\n  <div class=\"medium-heading\">סטטיסטיקות</div>\r\n  <div *ngIf=\"loadingUsers || loadingBereaveds || loadingMeetings\" class=\"loading\">\r\n    טוען..\r\n  </div>\r\n  <div *ngIf=\"!(loadingUsers || loadingBereaveds || loadingMeetings)\">\r\n    <div class=\"error-message\" *ngIf=\"error; else statisticsTables\">\r\n      {{ error }}\r\n    </div>\r\n    <ng-template #statisticsTables>\r\n      <app-active-users-statistics [users]=\"users\"></app-active-users-statistics>\r\n      <div class=\"site-divider\"></div>\r\n      <app-bereaveds-statistics [bereaveds]=\"bereaveds\"></app-bereaveds-statistics>\r\n      <div class=\"site-divider\"></div>\r\n      <app-meetings-statistics [meetings]=\"meetings\"></app-meetings-statistics>\r\n      <div class=\"site-divider\"></div>\r\n      <app-registrations-statistics [users]=\"users\"></app-registrations-statistics>\r\n    </ng-template>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { RouterModule } from '@angular/router';\r\nimport { AdminStatisticsModule } from '../admin-statistics.module';\r\nimport { AdminStatisticsPageComponent } from './admin-statistics-page.component';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nconst routes = [\r\n  {\r\n    path: '',\r\n    component: AdminStatisticsPageComponent\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  declarations: [AdminStatisticsPageComponent],\r\n  imports: [CommonModule, AdminStatisticsModule, RouterModule.forChild(routes)]\r\n})\r\nexport class AdminStatisticsPageModule {}\r\n","import { ChangeDetectionStrategy, Component, Input } from '@angular/core';\r\n\r\nimport { User, UserRole } from 'models';\r\n\r\ntype RegisteredUsers = {\r\n  [role in UserRole]: number;\r\n};\r\n\r\ninterface YearlyRegisteredUsers {\r\n  year: number;\r\n  registeredUsers: RegisteredUsers;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-registrations-statistics',\r\n  templateUrl: './registrations-statistics.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  styleUrls: ['./registrations-statistics.component.scss']\r\n})\r\nexport class RegistrationsStatisticsComponent {\r\n  yearlyRegisteredUsers: YearlyRegisteredUsers[];\r\n  total: number = 0;\r\n\r\n  @Input()\r\n  set users(users: User[]) {\r\n    this.yearlyRegisteredUsers = this.calcYearlyRegisteredUsers(users);\r\n  }\r\n\r\n  calcYearlyRegisteredUsers(users: User[]): YearlyRegisteredUsers[] {\r\n    const yearlyRegisteredUsersMap: {\r\n      [year: number]: RegisteredUsers;\r\n    } = {};\r\n\r\n    for (const user of users) {\r\n      const year = new Date(user.registered).getFullYear();\r\n\r\n      if (!Number.isNaN(year)) {\r\n        this.total++;\r\n\r\n        yearlyRegisteredUsersMap[year] = yearlyRegisteredUsersMap[year] || {\r\n          [UserRole.bereaved]: 0,\r\n          [UserRole.host]: 0,\r\n          [UserRole.participate]: 0\r\n        };\r\n\r\n        yearlyRegisteredUsersMap[year][user.role]++;\r\n      }\r\n    }\r\n\r\n    return Object.keys(yearlyRegisteredUsersMap)\r\n      .map(year => ({\r\n        year: Number.parseInt(year),\r\n        registeredUsers: yearlyRegisteredUsersMap[year]\r\n      }))\r\n      .sort((a, b) => b.year - a.year);\r\n  }\r\n}\r\n","<div class=\"small-heading\">הרשמות</div>\r\n<table class=\"table\">\r\n  <thead>\r\n    <tr>\r\n      <th>שנה</th>\r\n      <th>משתמשים</th>\r\n      <th>אחים</th>\r\n      <th>מארחים</th>\r\n    </tr>\r\n  </thead>\r\n  <tbody>\r\n    <tr *ngFor=\"let year of yearlyRegisteredUsers\">\r\n      <td>{{ year.year }}</td>\r\n      <td>{{ year.registeredUsers.participate }}</td>\r\n      <td>{{ year.registeredUsers.bereaved }}</td>\r\n      <td>{{ year.registeredUsers.host }}</td>\r\n    </tr>\r\n  </tbody>\r\n  <tfoot>\r\n    <tr>\r\n      <td>סה\"כ</td>\r\n      <td>{{ total }}</td>\r\n    </tr>\r\n  </tfoot>\r\n</table>\r\n"]}